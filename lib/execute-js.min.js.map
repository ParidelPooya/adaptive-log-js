{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d2418136277d9883ec62","webpack:///./src/index.js","webpack:///./src/tiny-cache.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/throttle-actions.js"],"names":["ExecuteJs","spreadify","spreadArgs","length","arguments","currentArg","i","Object","keys","map","key","constructor","options","defaultOption","logger","console","cache","require","_options","Execute","_logger","_cache","run","executionTree","executionData","execute","processSteps","goToNextStep","step","testResult","test","info","nextStep","if","default","Promise","reject","executeStepActionWithRetry","defaultRetrySettings","maxAttempts","error","_retry","retry","action","resolve","catch","e","tryCondition","title","executeStepActionWithCache","defaultCacheSettings","enable","ttl","_cacheSettings","cacheKey","has","then","hasData","log","get","data","set","set_result","processStep","defaultStepSettings","_step","allData","actionResult","result","JSON","stringify","childResult","totalResult","_executionTree","prototype","toString","call","steps","defaultExecutionTreeSettings","concurrency","finalResult","throttleActions","ps","push","stepResult","module","exports","DATA_KEY","Symbol","for","globalSymbols","getOwnPropertySymbols","global","indexOf","singleton","value","freeze","listOfCallableActions","limit","resultArray","Array","doNextAction","actionIndex","nextAction","listOfPromises","all"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;;AAEA,MAAMA,SAAN,CAAgB;AACZ,WAAOC,SAAP,GAAmB;AACf;AACA,YAAIC,aAAa,EAAjB;;AAEA;AACA,YAAIC,SAASC,UAAUD,MAAvB;;AAEA,YAAIE,UAAJ;;AAEA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,MAApB,EAA4BG,GAA5B,EAAiC;AAC7BD,yBAAaD,UAAUE,CAAV,CAAb;;AAEAC,mBAAOC,IAAP,CAAYH,UAAZ,EAAwBI,GAAxB,CAA6BC,GAAD,IAAS;AACjCR,2BAAWQ,GAAX,IAAkBL,WAAWK,GAAX,CAAlB;AACH,aAFD;AAGH;;AAED,eAAOR,UAAP;AACH;;AAEDS,gBAAYC,OAAZ,EAAqB;AACjB,YAAIC,gBAAgB;AAChBC,oBAAQC,OADQ;AAEhBC,mBAAO,mBAAAC,CAAQ,CAAR;AAFS,SAApB;;AAKA,YAAIC,WAAWC,QAAQlB,SAAR,CAAkBY,aAAlB,EAAiCD,OAAjC,CAAf;;AAEA,aAAKQ,OAAL,GAAeF,SAASJ,MAAxB;AACA,aAAKO,MAAL,GAAcH,SAASF,KAAvB;AACH;;AAED,WAAOM,GAAP,CAAWC,aAAX,EAA0BC,aAA1B,EAAyCZ,OAAzC,EAAkD;;AAE9C,YAAIa,UAAU,IAAIN,OAAJ,CAAYP,UAAUA,OAAV,GAAoB,EAAhC,CAAd;;AAEA,eAAOa,QAAQC,YAAR,CAAqBH,aAArB,EAAoCC,aAApC,CAAP;AACH;;AAEDG,iBAAaC,IAAb,EAAmBJ,aAAnB,EAAiC;AAC7B,cAAMK,aAAa,OAAOD,KAAKE,IAAZ,KAAqB,UAArB,GACbF,KAAKE,IAAL,CAAUN,aAAV,CADa,CACY;AADZ,UAEbI,KAAKE,IAFX;;AAIA,aAAKV,OAAL,CAAaW,IAAb,CAAmB,gBAAeF,UAAW,EAA7C;AACA;AACA,cAAMG,WAAWJ,KAAKK,EAAL,CAAQJ,UAAR,KAAuBD,KAAKK,EAAL,CAAQC,OAAhD;;AAEA,YAAI,CAACF,QAAL,EAAe;AACX;AACA,mBAAOG,QAAQC,MAAR,CAAe,oBAAf,CAAP;AACH,SAHD,MAGO;AACH;AACA,mBAAO,KAAKV,YAAL,CAAkBM,QAAlB,EAA4BR,aAA5B,CAAP;AACH;AACJ;;AAEDa,+BAA2BT,IAA3B,EAAiCJ,aAAjC,EAA+C;;AAE3C,cAAMc,uBAAuB;AACzBC,yBAAa,CADY;AAEzBC,mBAAO,MAAM;AAFY,SAA7B;;AAKA,YAAIC,SAAStB,QAAQlB,SAAR,CAAkBqC,oBAAlB,EAAwCV,KAAKc,KAAL,IAAc,EAAtD,CAAb;;AAGA,YAAIC,SAASR,QAAQS,OAAR,CAAgBhB,KAAKe,MAAL,CAAYnB,aAAZ,CAAhB,CAAb;;AAEA,aAAI,IAAIlB,IAAI,CAAZ,EAAeA,IAAImC,OAAOF,WAA1B,EAAuCjC,GAAvC,EAA4C;AACxCqC,qBAASA,OAAOE,KAAP,CAAcC,CAAD,IAAM;AACxB,oBAAIL,OAAOM,YAAP,CAAoBD,CAApB,CAAJ,EAA2B;AACvB,yBAAK1B,OAAL,CAAaW,IAAb,CAAmB,SAAQH,KAAKoB,KAAM,QAAO1C,IAAE,CAAE,sBAAjD;AACA,2BAAO6B,QAAQS,OAAR,CAAgBhB,KAAKe,MAAL,CAAYnB,aAAZ,CAAhB,CAAP;AACH,iBAHD,MAIK;AACD,2BAAOW,QAAQC,MAAR,CAAeU,CAAf,CAAP;AACH;AACJ,aARQ,CAAT;AASH;;AAED,eAAOH,MAAP;AACH;;AAEDM,+BAA2BrB,IAA3B,EAAiCJ,aAAjC,EAA+C;AAC3C,cAAM0B,uBAAuB;AACzBC,oBAAQ,KADiB;AAEzBC,iBAAK;AAFoB,SAA7B;;AAKA,YAAIC,iBAAiBlC,QAAQlB,SAAR,CAAkBiD,oBAAlB,EAAwCtB,KAAKZ,KAAL,IAAc,EAAtD,CAArB;;AAEA,YAAIqC,eAAeF,MAAnB,EAA2B;AACvB,gBAAIG,WAAWD,eAAe3C,GAAf,CAAmBc,aAAnB,CAAf;AACA,mBAAOW,QAAQS,OAAR,CAAgB,KAAKvB,MAAL,CAAYkC,GAAZ,CAAgBD,QAAhB,CAAhB,EACFE,IADE,CACIC,OAAD,IAAY;AACd1C,wBAAQ2C,GAAR,CAAY,WAAZ,EAAyBD,OAAzB;AACA,oBAAIA,OAAJ,EAAa;AACT,2BAAOtB,QAAQS,OAAR,CAAgB,KAAKvB,MAAL,CAAYsC,GAAZ,CAAgBL,QAAhB,CAAhB,CAAP;AACH,iBAFD,MAEO;AACH,2BAAO,KAAKjB,0BAAL,CAAgCT,IAAhC,EAAsCJ,aAAtC,EAAqDgC,IAArD,CAA2DI,IAAD,IAAS;AACtE,+BAAOzB,QAAQS,OAAR,CAAgB,KAAKvB,MAAL,CAAYwC,GAAZ,CAAgBP,QAAhB,EAA0BM,IAA1B,EAAgCP,eAAeD,GAA/C,CAAhB,EAAqEI,IAArE,CAA2EM,UAAD,IAAe;AAC5F/C,oCAAQ2C,GAAR,CAAY,2BAAZ,EAAyCI,UAAzC;AACA,mCAAO3B,QAAQS,OAAR,CAAgBgB,IAAhB,CAAP;AACH,yBAHM,CAAP;AAIH,qBALM,CAAP;AAMH;AACJ,aAbE,CAAP;AAcH,SAhBD,MAgBO;AACH,mBAAO,KAAKvB,0BAAL,CAAgCT,IAAhC,EAAsCJ,aAAtC,CAAP;AACH;AACJ;;AAEDuC,gBAAYnC,IAAZ,EAAkBJ,aAAlB,EAAgC;;AAE5B,cAAMwC,sBAAsB;AACxBtB,mBAAO;AADiB,SAA5B;;AAIA,YAAIuB,QAAQ9C,QAAQlB,SAAR,CAAkB+D,mBAAlB,EAAuCpC,IAAvC,CAAZ;AACA,YAAIsC,UAAU/C,QAAQlB,SAAR,CAAkBuB,aAAlB,EAAiC,EAAjC,CAAd;;AAEA,eAAO,IAAIW,OAAJ,CAAY,CAACS,OAAD,EAAUR,MAAV,KAAqB;;AAEpC,gBAAI6B,MAAMtB,MAAV,EAAkB;AACd,qBAAKvB,OAAL,CAAaW,IAAb,CAAmB,SAAQkC,MAAMjB,KAAM,EAAvC;;AAEA,oBAAImB,eAAe,KAAKlB,0BAAL,CAAgCgB,KAAhC,EAAuCzC,aAAvC,CAAnB;;AAEA2C,6BAAaX,IAAb,CAAoBY,MAAD,IAAY;;AAE3B,yBAAKhD,OAAL,CAAaW,IAAb,CAAmB,kBAAiBsC,KAAKC,SAAL,CAAeF,MAAf,CAAuB,EAA3D;;AAEAF,8BAAU/C,QAAQlB,SAAR,CAAkBiE,OAAlB,EAA2BE,MAA3B,CAAV;;AAEA;AACA;AACA,wBAAI,UAAUH,KAAd,EAAqB;AACjB,6BAAKtC,YAAL,CAAkBsC,KAAlB,EAAyBC,OAAzB,EAAkCV,IAAlC,CAAwCe,WAAD,IAAiB;AACpD,iCAAKnD,OAAL,CAAaW,IAAb,CAAmB,iBAAgBsC,KAAKC,SAAL,CAAeC,WAAf,CAA4B,EAA/D;;AAEA,gCAAIC,cAAcrD,QAAQlB,SAAR,CAAkBmE,MAAlB,EAA0BG,WAA1B,CAAlB;AACA,iCAAKnD,OAAL,CAAaW,IAAb,CAAmB,iBAAgBsC,KAAKC,SAAL,CAAeE,WAAf,CAA4B,EAA/D;;AAEA5B,oCAAQ4B,WAAR;AACH,yBAPD;AAQH,qBATD,MASO;AACH5B,gCAAQwB,MAAR;AACH;AAEJ,iBArBD,EAqBGvB,KArBH,CAqBWC,CAAD,IAAM;AACZV,2BAAOU,CAAP;AACH,iBAvBD;AAyBH,aA9BD,MA8BO;AACH,qBAAK1B,OAAL,CAAaW,IAAb,CAAmB,SAAQkC,MAAMjB,KAAM,EAAvC;;AAEA,oBAAI,UAAUiB,KAAd,EAAqB;AACjB,yBAAKtC,YAAL,CAAkBsC,KAAlB,EAAyBC,OAAzB,EAAkCV,IAAlC,CAAwCe,WAAD,IAAiB;AACpD,6BAAKnD,OAAL,CAAaW,IAAb,CAAmB,iBAAgBsC,KAAKC,SAAL,CAAeC,WAAf,CAA4B,EAA/D;AACA,6BAAKnD,OAAL,CAAaW,IAAb,CAAmB,iBAAgBsC,KAAKC,SAAL,CAAenD,QAAQlB,SAAR,CAAkBsE,WAAlB,CAAf,CAAgD,EAAnF;AACA3B,gCAAQ2B,WAAR;AACH,qBAJD;AAKH,iBAND,MAMO;AACH3B;AACH;AACJ;AACJ,SA7CM,CAAP;AA8CH;;AAEDlB,iBAAaH,aAAb,EAA4BC,aAA5B,EAA0C;;AAEtC,YAAIiD,cAAJ;;AAEA,YAAIlE,OAAOmE,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAAgCrD,aAAhC,MAAoD,gBAAxD,EAA2E;AACvE;AACAkD,6BAAiB;AACbI,uBAAQtD;AADK,aAAjB;AAGH,SALD,MAKO;AACHkD,6BAAiBlD,aAAjB;AACH;;AAED,cAAMuD,+BAA+B;AACjCC,yBAAa;AADoB,SAArC;;AAIAN,yBAAiBtD,QAAQlB,SAAR,CAAkB6E,4BAAlB,EAAgDL,cAAhD,CAAjB;;AAEA,YAAIO,cAAc,EAAlB;;AAEA,YAAId,UAAU/C,QAAQlB,SAAR,CAAkBuB,aAAlB,EAAiC,EAAjC,CAAd;;AAGA;;;;;;;;;;;;;;AAgBA,YAAIyD,kBAAkB,mBAAAhE,CAAQ,CAAR,CAAtB;;AAEA,YAAIiE,KAAK,EAAT;AACAT,uBAAeI,KAAf,CAAqBpE,GAArB,CAA0BmB,IAAD,IAAU;AAC/BsD,eAAGC,IAAH,CAAQ,MAAM;AACV,uBAAO,KAAKpB,WAAL,CAAiBnC,IAAjB,EAAuBsC,OAAvB,EAAgCV,IAAhC,CAAsC4B,UAAD,IAAgB;AACxDJ,kCAAc7D,QAAQlB,SAAR,CAAkB+E,WAAlB,EAA+BI,UAA/B,CAAd;AACAlB,8BAAU/C,QAAQlB,SAAR,CAAkBiE,OAAlB,EAA2BkB,UAA3B,CAAV;AACA,2BAAOJ,WAAP;AACH,iBAJM,CAAP;AAKH,aAND;AAOH,SARD;;AAUA,eAAOC,gBAAgBC,EAAhB,EAAoBT,eAAeM,WAAnC,EAAgDvB,IAAhD,CAAqD,MAAMwB,WAA3D,CAAP;AAEH;AAlOW;;AAqOhBK,OAAOC,OAAP,GAAiBnE,QAAQG,GAAzB,C;;;;;;;8CCvOA;;AAEA;AACA;;AAEA,MAAMiE,WAAWC,OAAOC,GAAP,CAAW,gBAAX,CAAjB;;AAEA;AACA;AACA;AACA,IAAIC,gBAAgBnF,OAAOoF,qBAAP,CAA6BC,MAA7B,CAApB;AACA,IAAInC,UAAWiC,cAAcG,OAAd,CAAsBN,QAAtB,IAAkC,CAAC,CAAlD;;AAEA,IAAI,CAAC9B,OAAL,EAAa;AACTmC,WAAOL,QAAP,IAAmB,EAAnB;AACH;;AAED;AACA;AACA,IAAIO,YAAY;AACZnC,SAAK,UAASjD,GAAT,EAAa;AACd,eAAOkF,OAAOL,QAAP,EAAiB7E,GAAjB,CAAP;AACH,KAHW;AAIZ6C,SAAK,UAAS7C,GAAT,EAAa;AACd,eAAOkF,OAAOL,QAAP,EAAiB7E,GAAjB,IAAwB,IAAxB,GAA+B,KAAtC;AACH,KANW;AAOZmD,SAAK,UAASnD,GAAT,EAAcqF,KAAd,EAAoB;AACrBH,eAAOL,QAAP,EAAiB7E,GAAjB,IAAwBqF,KAAxB;AACA,eAAO,IAAP;AACH;AAVW,CAAhB;;AAaA;AACA;AACAxF,OAAOyF,MAAP,CAAcF,SAAd;;AAEA;AACA;AACAT,OAAOC,OAAP,GAAiBQ,SAAjB,C;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;ACpBA;;AAEA;;;;;;;;;;;AAUA,SAASb,eAAT,CAAyBgB,qBAAzB,EAAgDC,KAAhD,EAAuD;AACnD;AACA,QAAI5F,IAAI,CAAR;AACA,QAAI6F,cAAc,IAAIC,KAAJ,CAAUH,sBAAsB9F,MAAhC,CAAlB;;AAEA;AACA;AACA;AACA;AACA,aAASkG,YAAT,GAAwB;AACpB,YAAI/F,IAAI2F,sBAAsB9F,MAA9B,EAAsC;AAClC;AACA,gBAAImG,cAAchG,GAAlB;AACA,gBAAIiG,aAAaN,sBAAsBK,WAAtB,CAAjB;AACA,mBAAOnE,QAAQS,OAAR,CAAgB2D,YAAhB,EACF/C,IADE,CACGY,UAAU;AAAG;AACf+B,4BAAYG,WAAZ,IAA2BlC,MAA3B;AACA;AACH,aAJE,EAIAZ,IAJA,CAIK6C,YAJL,CAAP;AAKH;AACJ;;AAED;AACA;AACA,QAAIG,iBAAiB,EAArB;AACA,WAAOlG,IAAI4F,KAAJ,IAAa5F,IAAI2F,sBAAsB9F,MAA9C,EAAsD;AAClDqG,uBAAerB,IAAf,CAAoBkB,cAApB;AACH;AACD,WAAOlE,QAAQsE,GAAR,CAAYD,cAAZ,EAA4BhD,IAA5B,CAAiC,MAAM2C,WAAvC,CAAP;AACH;;AAEDd,OAAOC,OAAP,GAAiBL,eAAjB,C","file":"execute-js.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"execute-js\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"execute-js\"] = factory();\n\telse\n\t\troot[\"execute-js\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d2418136277d9883ec62","\"use strict\";\n\nclass ExecuteJs {\n    static spreadify() {\n        // Holds the processed arguments for use by `fn`\n        let spreadArgs = {};\n\n        // Caching length\n        let length = arguments.length;\n\n        let currentArg;\n\n        for (let i = 0; i < length; i++) {\n            currentArg = arguments[i];\n\n            Object.keys(currentArg).map((key) => {\n                spreadArgs[key] = currentArg[key];\n            });\n        }\n\n        return spreadArgs;\n    }\n\n    constructor(options) {\n        let defaultOption = {\n            logger: console,\n            cache: require(\"./tiny-cache\")\n        };\n\n        let _options = Execute.spreadify(defaultOption, options);\n\n        this._logger = _options.logger;\n        this._cache = _options.cache;\n    }\n\n    static run(executionTree, executionData, options) {\n\n        let execute = new Execute(options ? options : {});\n\n        return execute.processSteps(executionTree, executionData);\n    }\n\n    goToNextStep(step, executionData){\n        const testResult = typeof step.test === \"function\"\n            ? step.test(executionData) // call the test with the results from the action\n            : step.test;\n\n        this._logger.info(`Test result: ${testResult}`);\n        // get a reference to the next step based on the test result\n        const nextStep = step.if[testResult] || step.if.default;\n\n        if (!nextStep) {\n            // TODO: better handeling if the next step is missing.\n            return Promise.reject(\"Unhandled scenario\");\n        } else {\n            // move on to the next step down the tree\n            return this.processSteps(nextStep, executionData);\n        }\n    }\n\n    executeStepActionWithRetry(step, executionData){\n\n        const defaultRetrySettings = {\n            maxAttempts: 1,\n            error: () => true\n        };\n\n        let _retry = Execute.spreadify(defaultRetrySettings, step.retry || {});\n\n\n        let action = Promise.resolve(step.action(executionData));\n\n        for(let i = 0; i < _retry.maxAttempts; i++) {\n            action = action.catch((e)=> {\n                if (_retry.tryCondition(e)){\n                    this._logger.info(`Step: ${step.title} try ${i+1} failed. Retrying...`);\n                    return Promise.resolve(step.action(executionData));\n                }\n                else {\n                    return Promise.reject(e);\n                }\n            });\n        }\n\n        return action;\n    }\n\n    executeStepActionWithCache(step, executionData){\n        const defaultCacheSettings = {\n            enable: false,\n            ttl: 60\n        };\n\n        let _cacheSettings = Execute.spreadify(defaultCacheSettings, step.cache || {});\n\n        if (_cacheSettings.enable) {\n            let cacheKey = _cacheSettings.key(executionData);\n            return Promise.resolve(this._cache.has(cacheKey))\n                .then((hasData)=> {\n                    console.log(\"Has Data:\", hasData);\n                    if (hasData) {\n                        return Promise.resolve(this._cache.get(cacheKey));\n                    } else {\n                        return this.executeStepActionWithRetry(step, executionData).then((data)=> {\n                            return Promise.resolve(this._cache.set(cacheKey, data, _cacheSettings.ttl)).then((set_result)=> {\n                                console.log(\"Set Data in Cache result:\", set_result);\n                                return Promise.resolve(data);\n                            });\n                        });\n                    }\n                });\n        } else {\n            return this.executeStepActionWithRetry(step, executionData);\n        }\n    }\n\n    processStep(step, executionData){\n\n        const defaultStepSettings = {\n            retry: 1\n        };\n\n        let _step = Execute.spreadify(defaultStepSettings, step);\n        let allData = Execute.spreadify(executionData, {});\n\n        return new Promise((resolve, reject) => {\n\n            if (_step.action) {\n                this._logger.info(`Step: ${_step.title}`);\n\n                let actionResult = this.executeStepActionWithCache(_step, executionData);\n\n                actionResult.then( (result) => {\n\n                    this._logger.info(`Action result: ${JSON.stringify(result)}`);\n\n                    allData = Execute.spreadify(allData, result);\n\n                    // if there's a test defined, then actionResult must be a promise\n                    // so pass the promise response to goToNextStep\n                    if (\"test\" in _step) {\n                        this.goToNextStep(_step, allData).then((childResult) => {\n                            this._logger.info(`Child result: ${JSON.stringify(childResult)}`);\n\n                            let totalResult = Execute.spreadify(result, childResult);\n                            this._logger.info(`Total result: ${JSON.stringify(totalResult)}`);\n\n                            resolve(totalResult);\n                        });\n                    } else {\n                        resolve(result);\n                    }\n\n                }).catch( (e)=> {\n                    reject(e);\n                });\n\n            } else {\n                this._logger.info(`Step: ${_step.title}`);\n\n                if (\"test\" in _step) {\n                    this.goToNextStep(_step, allData).then((childResult) => {\n                        this._logger.info(`Child result: ${JSON.stringify(childResult)}`);\n                        this._logger.info(`Total result: ${JSON.stringify(Execute.spreadify(childResult) )}`);\n                        resolve(childResult);\n                    });\n                } else {\n                    resolve();\n                }\n            }\n        });\n    }\n\n    processSteps(executionTree, executionData){\n\n        let _executionTree;\n\n        if( Object.prototype.toString.call( executionTree ) === \"[object Array]\" ) {\n            // if executionTree is array then we need to convert it to proper object with all missing properties.\n            _executionTree = {\n                steps : executionTree\n            };\n        } else {\n            _executionTree = executionTree;\n        }\n\n        const defaultExecutionTreeSettings = {\n            concurrency: 1\n        };\n\n        _executionTree = Execute.spreadify(defaultExecutionTreeSettings, _executionTree);\n\n        let finalResult = {};\n\n        let allData = Execute.spreadify(executionData, {});\n\n\n        /*\n        // Old way that execute one step at a time (sequential)\n        return new Promise((resolve, reject) => {\n            _executionTree.steps.reduce((allStepsSoFar, next) => {\n\n                return allStepsSoFar.then(() => {\n                    return this.processStep(next, allData).then((stepResult) => {\n                        finalResult = Execute.spreadify(finalResult, stepResult);\n                        allData = Execute.spreadify(allData, stepResult);\n                        return finalResult;\n                    }).catch( (e)=> {reject(e)})\n                });\n\n            }, Promise.resolve()).then(() => {resolve(finalResult)});\n        });\n        */\n        let throttleActions = require(\"./throttle-actions\");\n\n        let ps = [];\n        _executionTree.steps.map((step) => {\n            ps.push(() => {\n                return this.processStep(step, allData).then((stepResult) => {\n                    finalResult = Execute.spreadify(finalResult, stepResult);\n                    allData = Execute.spreadify(allData, stepResult);\n                    return finalResult;\n                });\n            });\n        });\n\n        return throttleActions(ps, _executionTree.concurrency).then(() => finalResult);\n\n    }\n}\n\nmodule.exports = Execute.run;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\"use strict\";\n\n// create a unique, global symbol name\n// -----------------------------------\n\nconst DATA_KEY = Symbol.for(\"TinyCache.data\");\n\n// check if the global object has this symbol\n// add it if it does not have the symbol, yet\n// ------------------------------------------\nlet globalSymbols = Object.getOwnPropertySymbols(global);\nlet hasData = (globalSymbols.indexOf(DATA_KEY) > -1);\n\nif (!hasData){\n    global[DATA_KEY] = {};\n}\n\n// define the singleton API\n// ------------------------\nlet singleton = {\n    get: function(key){\n        return global[DATA_KEY][key];\n    },\n    has: function(key){\n        return global[DATA_KEY][key] ? true : false;\n    },\n    set: function(key, value){\n        global[DATA_KEY][key] = value;\n        return true;\n    }\n};\n\n// ensure the API is never changed\n// -------------------------------\nObject.freeze(singleton);\n\n// export the singleton API only\n// -----------------------------\nmodule.exports = singleton;\n\n\n// WEBPACK FOOTER //\n// ./src/tiny-cache.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 2\n// module chunks = 0","\"use strict\";\n\n/**\n * https://stackoverflow.com/questions/38385419/throttle-amount-of-promises-open-at-a-given-time\n * Performs a list of callable actions (promise factories) so that only a limited\n * number of promises are pending at any given time.\n *\n * @param listOfCallableActions An array of callable functions, which should\n *     return promises.\n * @param limit The maximum number of promises to have pending at once.\n * @returns A Promise that resolves to the full list of values when everything is done.\n */\nfunction throttleActions(listOfCallableActions, limit) {\n    // We'll need to store which is the next promise in the list.\n    let i = 0;\n    let resultArray = new Array(listOfCallableActions.length);\n\n    // Now define what happens when any of the actions completes. Javascript is\n    // (mostly) single-threaded, so only one completion handler will call at a\n    // given time. Because we return doNextAction, the Promise chain continues as\n    // long as there's an action left in the list.\n    function doNextAction() {\n        if (i < listOfCallableActions.length) {\n            // Save the current value of i, so we can put the result in the right place\n            let actionIndex = i++;\n            let nextAction = listOfCallableActions[actionIndex];\n            return Promise.resolve(nextAction())\n                .then(result => {  // Save results to the correct array index.\n                    resultArray[actionIndex] = result;\n                    return;\n                }).then(doNextAction);\n        }\n    }\n\n    // Now start up the original <limit> number of promises.\n    // i advances in calls to doNextAction.\n    let listOfPromises = [];\n    while (i < limit && i < listOfCallableActions.length) {\n        listOfPromises.push(doNextAction());\n    }\n    return Promise.all(listOfPromises).then(() => resultArray);\n}\n\nmodule.exports = throttleActions;\n\n\n\n// WEBPACK FOOTER //\n// ./src/throttle-actions.js"],"sourceRoot":""}