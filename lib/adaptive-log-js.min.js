!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("adaptive-log-js",[],t):"object"==typeof exports?exports["adaptive-log-js"]=t():e["adaptive-log-js"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(l[o])return l[o].exports;var r=l[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var l={};return t.m=e,t.c=l,t.d=function(e,l,o){t.o(e,l)||Object.defineProperty(e,l,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(l,"a",l),l},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,l){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var l=0;l<t.length;l++){var o=t[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,l,o){return l&&e(t.prototype,l),o&&e(t,o),t}}(),f=function(){function e(t){o(this,e);var l={logger:console,buffer_level:e.level.DEBUG,flush_level:e.level.DEBUG,buffer_size:100,keep_history:!1};t||(t={}),this._options={logger:t.logger?t.logger:l.logger,buffer_level:t.buffer_level?t.buffer_level:l.buffer_level,flush_level:t.flush_level?t.flush_level:l.flush_level,buffer_size:t.buffer_size?t.buffer_size:l.buffer_size,keep_history:t.keep_history?t.keep_history:l.keep_history},this._buffer=[[],[]],this.all=[],this._selected_buffer=0}return r(e,[{key:"flush",value:function(){var e=this;this._buffer[1-this._selected_buffer].map(function(t){e.sendToUpperLogger(t)}),this._buffer[this._selected_buffer].map(function(t){e.sendToUpperLogger(t)}),this._buffer=[[],[]]}},{key:"sendToUpperLogger",value:function(t){switch(t.level){case e.level.DEBUG:this._options.logger.log(t.logObject);break;case e.level.INFO:this._options.logger.info(t.logObject);break;case e.level.WARN:this._options.logger.warn(t.logObject);break;case e.level.ERROR:this._options.logger.error(t.logObject)}}},{key:"writeToBuffer",value:function(e){var t=e.level,l=e.logObject;t>=this._options.buffer_level&&(this._options.keep_history&&this.all.push({level:t,logObject:l}),this._buffer[this._selected_buffer].length===this._options.buffer_size&&(this._selected_buffer=1-this._selected_buffer,this._buffer[this._selected_buffer]=[]),this._buffer[this._selected_buffer].push({level:t,logObject:l}),t>=this._options.flush_level&&this.flush())}},{key:"logItem",value:function(e,t,l){var o={level:t,logObject:e};l?this.sendToUpperLogger(o):this.writeToBuffer(o)}},{key:"log",value:function(t){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.logItem(t,e.level.DEBUG,l)}},{key:"info",value:function(t){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.logItem(t,e.level.INFO,l)}},{key:"warn",value:function(t){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.logItem(t,e.level.WARN,l)}},{key:"error",value:function(t){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.logItem(t,e.level.ERROR,l)}}]),e}();f.level={DEBUG:0,INFO:1,WARN:2,ERROR:3},e.exports=f}])});